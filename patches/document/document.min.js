"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),_setData=function(t,e,n){t._refresh=!0,t.setData(_defineProperty({},e,n))},_search=function t(e,n,s,i){if(!e||!e.length)return null;for(var r=e.length;r--;)if("text"!=e[r].type){if(s+="["+r+"]",e[r].attrs&&e[r].attrs.id==n)return new element(e[r],s,i);s+=".children";var o=t(e[r].children,n,s,i);if(null!=o)return o;s=s.substring(0,s.length-9),s=s.substring(0,s.length-("["+r+"]").length)}return null},element=function(){function t(e,n,s){_classCallCheck(this,t),this.id="text"==e.type?"":e.attrs.id,this.nodes=e,this.styles={};for(var i=(e.attrs.style||"").split(";"),r=i.length;r--;)if(i[r].includes(":")){var o=i[r].split(":");this.styles[o[0]]=o[1]}this._site=n,this._Component=s,this.nodes.attrs=this.nodes.attrs||{},this.nodes.children=this.nodes.children||[],"text"==e.children[0].type&&(this._text=!0)}return _createClass(t,[{key:"setText",value:function(t){return!(!this._text||"string"!=typeof t)&&(this.nodes.children[0].text=t,_setData(this._Component,this._site,this.nodes),!0)}},{key:"getText",value:function(){return this._text?this.nodes.children[0].text:null}},{key:"addChildren",value:function(t,e){return"object"==(void 0===t?"undefined":_typeof(t))&&e>=0&&e<=this.nodes.children.length&&(this.nodes.children.splice(e,0,t),_setData(this._Component,this._site,this.nodes),!0)}},{key:"removeChildren",value:function(t){return t>=0&&t<this.nodes.children.length&&(this.nodes.children.splice(t,1),_setData(this._Component,this._site,this.nodes),!0)}},{key:"getChildren",value:function(e){return e>=0&&e<this.nodes.children.length?new t(this.nodes.childrens[e],this._site+".children["+e+"]",this._Component):null}},{key:"getAttr",value:function(t){return this.nodes.attrs.hasOwnProperty(t)?this.nodes.attrs[t]:null}},{key:"setAttr",value:function(t,e){return this.nodes.attrs[t]=e,_setData(this._Component,this._site,this.nodes),!0}},{key:"getStyle",value:function(t){return t=t.replace(/(A-Z)/g,"-$1").toLowerCase(),this.styles.hasOwnProperty(t)?this.styles[t]:null}},{key:"setStyle",value:function(t,e){if("string"==typeof t){if(t=t.replace(/(A-Z)/g,"-$1").toLowerCase(),this.styles.hasOwnProperty(t)){this.styles[t]=e;var n="";for(var s in this.styles)n+=s+":"+this.styles[s]+";";this.nodes.attrs.style=n}else this.nodes.attrs.style=(this.nodes.attrs.style||"")+";"+t+":"+e;_setData(this._Component,this._site,this.nodes)}return!1}},{key:"removeAttr",value:function(t){return this.nodes.attrs[t]=void 0,_setData(this._Component,this._site,this.nodes),!0}},{key:"getElementById",value:function(t){return _search(this.nodes,t,this._site,this._Component)}},{key:"update",value:function(){return _setData(this._Component,this._site,this.nodes),!0}}]),t}(),dom=function(){function t(e,n,s){_classCallCheck(this,t),this._root=e,this.nodes=n,this._Component=s}return _createClass(t,[{key:"getElementById",value:function(t){return _search(this.nodes,t,this._root,this._Component)}},{key:"getChildren",value:function(t){return t>=0&&t<(this.nodes.children||[]).length?new element(this.nodes.childrens[t],this._root+".children["+t+"]",this._Component):null}}]),t}();module.exports=dom;